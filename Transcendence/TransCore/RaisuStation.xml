<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

	<!-- Raisu Station -->

	<StationType UNID="&stRaisuStation;"
			name=				": Raisu Station"
			sovereign=			"&svCommonwealth;"
			inherit=			"&baCommonwealthStation;"

			dockScreen=			"Main"
			abandonedScreen=	"&dsRPGAbandonedStation;"

			level=				"3"
			multiHull=			"true"
			armorID=			"&itPlasteelPlate;"
			hitPoints=			"150"
			regen=				"1"
			ejectaType=			"&vtWreckEjecta;"

			attributes=			"commonwealth, commonwealthCustoms, friendly, human, majorStation, populated, raisuStation"
			>

		<Properties>
			<Constant id="rpgCharacter.stationMaster">
				{
					id: 'raisuStationMaster
					gender: 'genderFemale
					}
			</Constant>

			<Data id="rpg.storageID"></Data>
		</Properties>

		<!-- Encounter Info -->
		
		<Encounter
				exclusionRadius="80"
				/>

		<ImageVariants>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="0" imageY="0" imageWidth="64" imageHeight="128"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="64" imageY="0" imageWidth="64" imageHeight="128"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="128" imageY="0" imageWidth="64" imageHeight="128"/>
			<Image	imageID="&rsCommonwealthSlumsImage;" imageX="192" imageY="0" imageWidth="64" imageHeight="128"/>
		</ImageVariants>

		<!-- Trade and Items -->

		<Trade currency="credit">
			<Sell	criteria="m +commonwealth; +basicAmmo; -defective; -illegal; -notForSale; -notStandard;" priceAdj="100" inventoryAdj="200" levelFrequency="systemLevel:ruc|c|cur"/>
			
			<Refuel			criteria="f +BasicFuel; L:1-4;" priceAdj="100"/>
			<RepairArmor	criteria="a L:1-4;" priceAdj="100"/>
			<ReplaceArmor	criteria="a L:1-4;" priceAdj="100"/>
			<InstallDevice	criteria="d L:1-4;" priceAdj="100"/>
			<RemoveDevice	criteria="d L:1-4;" priceAdj="100"/>
		</Trade>

		<!-- Ships and Defenses -->

		<Ships challenge="standard">
			<Lookup table="&tbCommPrivateCrafts;"/>
		</Ships>

		<DockScreens>
			<Main>
				<Panes>
					<Default descID="descNormal">
						<OnPaneInit>
							(block ()
								(scrShowAction gScreen 'actionTakeReward (rpgGetStorage gSource))
								)
						</OnPaneInit>

						<Actions>
							<Action id="actionTakeReward">
								(scrShowScreen gScreen &dsRPGLoot; {
									sourceObj: (rpgGetStorage gSource)
									})
							</Action>

							<Action id="actionMainHall" default="1">
								(rpgMissionAssignment {
									missionCriteria: "n +commonwealthHabitat;"
									maxActive: 1
									noMissionTextID: 'descNoMissions

									missionGiver: (objGetProperty gSource 'rpgCharacter.stationMaster)
									})
							</Action>

							<Action id="actionDockServices">
								;	If the station is still controlled by warlords, then 
								;	no dock services.

								(switch
									(msnFind "c +unid:&msRaisuStation01;;")
										(rpgDockServices gPlayerShip { })

									(scrShowScreen &dsRPGMessage;{
										textID: 'descNoServices
										})
									)
							</Action>

							<Action id="actionUndock" cancel="1">
								<Exit/>
							</Action>
						</Actions>
					</Default>
				</Panes>
			</Main>
		</DockScreens>

		<DockingPorts>
			<Port x="0"		y="80" />
			<Port x="43"	y="56" />
			<Port x="52"	y="8" />
			<Port x="35"	y="-44" />
			<Port x="-35"	y="-44" />
			<Port x="-52"	y="8" />
			<Port x="-43"	y="56" />
		</DockingPorts>

		<Language>
			<Text id="actionTakeReward">[T]ake Reward</Text>

			<Text id="descNormal">

				The loud voices of a packed multitude bounce off every bulkhead 
				and corridor in the station. Old air scrubbers pump a thin, 
				odorous breeze out of rusty vents. Discarded packets of	
				Salmonite and Red Nebula beer huddle in the corner.

				Welcome to Raisu Station!

			</Text>
			<Text id="descNoServices">

				The docking bay is deserted. No one is here to service your 
				ship.
			
			</Text>
		</Language>
	</StationType>

</TranscendenceModule>
